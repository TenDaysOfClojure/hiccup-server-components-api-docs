<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>ten-d-c.hiccup-server-components.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Hiccup Server Components</span> <span class="project-version"></span></span></a></h1></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var--.3Ehiccup"><div class="inner"><span>-&gt;hiccup</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var--.3Ehtml"><div class="inner"><span>-&gt;html</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var--.3Ehtml-file"><div class="inner"><span>-&gt;html-file</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-all-components"><div class="inner"><span>all-components</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-clear-components"><div class="inner"><span>clear-components</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-component-.3Ehtml"><div class="inner"><span>component-&gt;html</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-component-.3Ehtml-file"><div class="inner"><span>component-&gt;html-file</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-component-counts"><div class="inner"><span>component-counts</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-css-classes"><div class="inner"><span>css-classes</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-get-component-docs"><div class="inner"><span>get-component-docs</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-get-component-meta-data"><div class="inner"><span>get-component-meta-data</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-javascript"><div class="inner"><span>javascript</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-raw-html"><div class="inner"><span>raw-html</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-reg-component"><div class="inner"><span>reg-component</span></div></a></li><li class="depth-1"><a href="ten-d-c.hiccup-server-components.core.html#var-wrap-response-middleware"><div class="inner"><span>wrap-response-middleware</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">ten-d-c.hiccup-server-components.core</h1><div class="doc"><div class="markdown"><p>A server-side rendering (SSR) library for Clojure web applications that facilitates <strong>defining</strong>, <strong>composing</strong>, <strong>organising</strong>, and <strong>unit testing</strong> user interface components, as well as <strong>generating the associated HTML</strong>. Based on the <a href="https://github.com/weavejester/hiccup">Hiccup library</a></p>
<p>Components represent modular, abstract pieces of the user interface which are composed into a larger, complex applications with a high degree of abstraction.</p>
<p>Can be used seamlessly with HTTP routing libraries such as <a href="https://github.com/metosin/reitit">Reitit</a>, <a href="https://github.com/weavejester/compojure">Compojure</a>, and directly with various <a href="https://github.com/ring-clojure/ring">Clojure ring implementations</a> for generating HTML responses. Can also be used to generate static HTML files.</p>
<p>See <a href="https://github.com/TenDaysOfClojure/hiccup-server-components/blob/master/README.md">full README</a> for examples and further details.</p>
</div></div><div class="public anchor" id="var--.3Ehiccup"><h3>-&gt;hiccup</h3><div class="usage"><code>(-&gt;hiccup hiccup-data local-components)</code><code>(-&gt;hiccup hiccup-data)</code></div><div class="doc"><div class="markdown"><p>Processes components in the provided <code>hiccup-data</code> (vectors describing HTML) and returns expanded Hiccup data (vectors describing HTML).</p>
<ul>
<li>
<p><code>hiccup-data</code>: The hiccup data (vectors describing HTML) to process which includes references to components.</p>
</li>
<li>
<p><code>local-components</code>: (Optional) A map of component configuration. Components defined here will overwrite components registered with <code>-&gt;reg-component</code> for this function call only.</p>
</li>
</ul>
</div></div></div><div class="public anchor" id="var--.3Ehtml"><h3>-&gt;html</h3><div class="usage"><code>(-&gt;html hiccup-data local-components)</code><code>(-&gt;html hiccup-data)</code></div><div class="doc"><div class="markdown"><p>Takes <code>hiccup-data</code> (vectors describing HTML), that can include component references, and returns the generated HTML.</p>
<ul>
<li>
<p><code>hiccup-data</code>: The hiccup data (vectors describing HTML) to process which may include references to components.</p>
</li>
<li>
<p><code>local-components</code>: (Optional) A map of component configuration. Components defined here will overwrite components registered with <code>-&gt;reg-component</code> for this function call only.</p>
</li>
</ul>
</div></div></div><div class="public anchor" id="var--.3Ehtml-file"><h3>-&gt;html-file</h3><div class="usage"><code>(-&gt;html-file file-path hiccup-data)</code><code>(-&gt;html-file file-path hiccup-data local-components)</code></div><div class="doc"><div class="markdown"><p>Takes a <code>file-path</code> and <code>hiccup-data</code> (vectors describing HTML), that can include component references, and saves the generated HTML to the given <code>file-path</code>.</p>
<ul>
<li>
<p><code>file-path</code>: The file path to save the outputed HTML to.</p>
</li>
<li>
<p><code>hiccup-data</code>: The hiccup data (vectors describing HTML) to process which may include references to components.</p>
</li>
<li>
<p><code>local-components</code>: (Optional) A map of component configuration. Components defined here will overwrite components registered with <code>-&gt;reg-component</code> for that function call only.</p>
</li>
</ul>
</div></div></div><div class="public anchor" id="var-all-components"><h3>all-components</h3><div class="usage"><code>(all-components)</code></div><div class="doc"><div class="markdown"><p>Lists all registered components and their associated metadata</p>
</div></div></div><div class="public anchor" id="var-clear-components"><h3>clear-components</h3><div class="usage"><code>(clear-components)</code></div><div class="doc"><div class="markdown"><p>Clears all components that where registered using <code>-&gt;reg-component</code></p>
</div></div></div><div class="public anchor" id="var-component-.3Ehtml"><h3>component-&gt;html</h3><div class="usage"><code>(component-&gt;html component-element-name)</code><code>(component-&gt;html component-element-name params)</code><code>(component-&gt;html component-element-name params local-components)</code></div><div class="doc"><div class="markdown"><p>Generates and returns HTML of a component with the given <code>component-element-name</code>.</p>
<p>Useful for generating the HTML of top-level web pages granted they are registered as component.</p>
<ul>
<li>
<p><code>component-element-name</code>: The qualified keyword of the component element name.</p>
</li>
<li>
<p><code>params</code>: (Optional) The params to pass to the component if it has parameters.</p>
</li>
<li>
<p><code>local-components</code>: (Optional) A map of component configuration. Components defined here will overwrite components registered with <code>-&gt;reg-component</code> for that function call only.</p>
</li>
</ul>
</div></div></div><div class="public anchor" id="var-component-.3Ehtml-file"><h3>component-&gt;html-file</h3><div class="usage"><code>(component-&gt;html-file file-path component-element-name)</code><code>(component-&gt;html-file file-path component-element-name params)</code><code>(component-&gt;html-file file-path component-element-name params local-components)</code></div><div class="doc"><div class="markdown"><p>Generates the HTML of a component with the given <code>component-element-name</code> and saves the output to the given <code>file-path</code>.</p>
<p>Useful for generating HTML files of top-level web pages granted they are registered as component.</p>
<ul>
<li>
<p><code>file-path</code>: The file path to save the outputed HTML to.</p>
</li>
<li>
<p><code>component-element-name</code>: The qualified keyword of the component element name.</p>
</li>
<li>
<p><code>params</code>: (Optional) The params to pass to the component if it has parameters.</p>
</li>
<li>
<p><code>local-components</code>: (Optional) A map of component configuration. Components defined here will overwrite components registered with <code>-&gt;reg-component</code> for that function call only.</p>
</li>
</ul>
</div></div></div><div class="public anchor" id="var-component-counts"><h3>component-counts</h3><div class="usage"><code>(component-counts)</code><code>(component-counts all-components)</code></div><div class="doc"><div class="markdown"><p>Provides a summary for component counts grouped by component namespace</p>
<p>Returns a list of maps that include a <code>component-namespace</code> and <code>total-components</code> key:</p>
<pre><code>({:component-namespace "ux.components", :total-components 2}
 {:component-namespace "ux.layouts", :total-components 2})
</code></pre>
</div></div></div><div class="public anchor" id="var-css-classes"><h3>css-classes</h3><div class="usage"><code>(css-classes &amp; classes)</code></div><div class="doc"><div class="markdown"><p>Convenience function for contructing ‘class’ attributes of HTML elements.</p>
<p>Takes a variable list of <code>classes</code> which can be keywords, strings, nil or empty strings and contructs a consistent space seperated string that represents the css classes of an HTML element.</p>
<p>Keywords and strings can be space, comma or period seperated and will be expanded into seperate css classes.</p>
<p>Ignores nil values and blank strings, allowing for conditional contruction of css classes.</p>
<p>Useful for contructing ‘class’ attributes of HTML elements.</p>
<p>Examples:</p>
<pre><code class="language-clojure">;; Dot seperated keyword
(css-classes :one.two.three) ;; =&gt; "one two three"

;; Dot seperated string
(css-classes "one.two.three") ;; =&gt; "one two three"

;; Dot seperated string
(css-classes "one.two.three") ;; =&gt; "one two three"

;; Comma seperated string
(css-classes "one,two,three") ;; =&gt; "one two three"

;; Keywords
(css-classes :one :two :three) ;; =&gt; "one two three"

;; Strings
(css-classes "one" "two" "three") ;; =&gt; "one two three"

;; Nils are ignored allowing for conditional statements
(css-classes :one
             :two
             :three
             ;; returns nil
             (when (= 1 2) :four)) ;; =&gt; "one two three"
</code></pre>
<p>Example usage with Hiccup data:</p>
<pre><code class="language-clojure">[:div {:class (css-classes :one.two.three :four :five)}
  "Hello world"]

;; =&gt; "&lt;div class="one two three four five"&gt;Hello world&lt;/div&gt;"

;; Conditional css classes

(let [error?  true
      message "This is a test"]
  [:div {:class (css-classes :alert
                             (if error?
                               :error-alert
                               :info-alert))}
    message])

;; =&gt; "&lt;div class="alert error-alert"&gt;This is a test&lt;/div&gt;"
</code></pre>
</div></div></div><div class="public anchor" id="var-get-component-docs"><h3>get-component-docs</h3><div class="usage"><code>(get-component-docs element-name)</code></div><div class="doc"><div class="markdown"><p>Gets component documentation (a map including a <code>doc</code> and <code>example</code> / <code>examples</code> key if availible) from it’s metadata that was associated with the component when registered via <code>reg-component</code></p>
</div></div></div><div class="public anchor" id="var-get-component-meta-data"><h3>get-component-meta-data</h3><div class="usage"><code>(get-component-meta-data element-name)</code></div><div class="doc"><div class="markdown"><p>Gets component metadata that was associated with the component when registered via <code>reg-component</code></p>
</div></div></div><div class="public anchor" id="var-javascript"><h3>javascript</h3><div class="usage"><code>(javascript &amp; javascript)</code></div><div class="doc"><div class="markdown"><p>Converts provided <code>javascript</code> into an unescaped string, allowing the javascript to be executed by the browser. Used for including executable javascript in Hiccup data.</p>
</div></div></div><div class="public anchor" id="var-raw-html"><h3>raw-html</h3><div class="usage"><code>(raw-html &amp; html)</code></div><div class="doc"><div class="markdown"><p>Converts provided <code>html</code> into an unescaped string, allowing the HTML to be rendered by the browser. Used for including strings that contain HTML markup that should not be escaped.</p>
</div></div></div><div class="public anchor" id="var-reg-component"><h3>reg-component</h3><div class="usage"><code>(reg-component element-name component-meta-data component)</code><code>(reg-component element-name component)</code></div><div class="doc"><div class="markdown"><p>Registers a component with the given <code>element-name</code> (must be a qualified keyword e.g <code>:my-components/login-form</code>) where the given <code>component</code> can be either a pure function that returns Hiccup data, a vector (representing Hiccup data) or a string.</p>
<p>Once a component is registered it can be referenced in Hiccup data by its qualified keyword.</p>
<p>Supported parameters:</p>
<ul>
<li>
<p><code>element-name</code> (Required): The element name (must be a qualified keyword e.g :my-components/login-form) that describes the component e.g. <code>:ux.elements/ordered-list</code>, <code>:ux.elements/unordered-list</code>.</p>
</li>
<li>
<p><code>component-meta-data</code> (Optional): A clojure map representing metadata of the component. Should include the following keys:</p>
<ul>
<li>
<p><code>:doc</code>: A Docstring describing the component as well as its parameters.</p>
</li>
<li>
<p><code>:example</code>: Hiccup data representing a single example of referencing the component.</p>
</li>
<li>
<p><code>:examples</code>: Allows for providing multiple examples, should be a map with the key being the description of the example and the value being Hiccup data representing an example of referencing the component.</p>
</li>
</ul>
</li>
<li>
<p><code>component</code> (Required): Can be either a pure function that returns Hiccup data, a vector (representing Hiccup data) or a string.</p>
</li>
</ul>
<p>Example:</p>
<pre><code class="language-clojure">(hc/reg-component
 ;; Keyword to uniquely identify the component:
 :ux.layouts/html-doc

 ;; Include meta data in the form of a map including `doc` and `examples` keys:
 {:doc
  "The main HTML document including a HEAD (with required CSS and Javascript
    included) and BODY section.

    This component is the basis for all top-level pages in the application.

    The first parameter (a map) represents the component's options, followed by
    a variable list of `child-elements` in the form of Hiccup data that will be
    placed in the BODY.

    Component options:

    - `title`: The title of the HTML document (will populate the title tag
       in the HEAD of the document)"

  :examples {"With single child element"
             [:ux.layouts/html-doc
              {:title "One child element"}
              [:div "Hello world"]]

             "With multiple child elements"
             [:ux.layouts/html-doc
              {:title "Multiple child element"}
              [:h1 "Hello world"]
              [:p "This is a test"]
              [:a {:href "/search"} "Try searching for more results"]]}}

 ;; Pure function implementing the responsibilities of the component:
 (fn [{:keys [title] :as options} &amp; child-elements]
   [:html
    [:head
     [:meta {:charset "UTF-8"}]
     [:meta {:content "width=device-width, initial-scale=1.0"
             :name "viewport"}]
     ;; Include application CSS and any javascript
     [:link {:rel "stylesheet" :href "/css/main.css"}]
     [:script {:src "/js/app-bundle.js"}]
     ;; Include the title of the document
     [:title title]]
    ;; Variable child elements included in body element
    [:body child-elements]]))
</code></pre>
</div></div></div><div class="public anchor" id="var-wrap-response-middleware"><h3>wrap-response-middleware</h3><div class="usage"><code>(wrap-response-middleware request)</code></div><div class="doc"><div class="markdown"><p>Ring middleware that will generate HTML using Hiccup server components conventions and set the <code>:body</code> of the response to the generated HTML.</p>
<p>Works with <a href="https://github.com/weavejester/compojure">Compojure</a> and <a href="https://github.com/metosin/reitit">Reitit</a> routing libraries as well as Ring compatible HTTP servers.</p>
<p>HTTP route handlers configured with this middleware can return a map including the following keys which will result in HTML being set on the response body:</p>
<ul>
<li>
<p><code>:hsc/component</code>: The qualified keyword of the component to use to generate HTML that will be set as the <code>:body</code> of the response. Component params can be supplied with the <code>:hsc/params</code> key.</p>
</li>
<li>
<p><code>:hsc/params</code> (Optional): Used in conjunction with the <code>:hsc/component</code> key, represents params that will be passed to the component.</p>
</li>
<li>
<p><code>:hsc/html</code>: Hiccup data (vectors describing HTML), that can include component references, that will be used to generate HTML that will be set as the <code>:body</code> of the response.</p>
</li>
</ul>
<p>Example of <a href="https://github.com/weavejester/compojure">Compojure</a> routes with middleware configured:</p>
<pre><code class="language-clojure">(ns http-routing.compojure
  (:require [compojure.core :refer :all]
            [ten-d-c.hiccup-server-components.core :as hc]))

(compojure.core/defroutes app

;; Generates and returns the HTML for the `:ux.pages/home` component, no
;; component params are provided.
(GET "/" []
     {:hsc/component :ux.pages/home})


;; Generates and returns the HTML for the `:ux.pages/dashboard` component,
;; passing the component the `hsc/params` key as params.
(GET "/dashboard" []
     {:hsc/component :ux.pages/dashboard
      :hsc/params {:username "bobsmith"
                   :email-address "bobsmith@somemail.net"}})


;; Generates and returns the HTML from Hiccup data (which can include
;; component refererences) in the `:hsc/html` key.
(GET "/testing" []
     {:hsc/html [:ux.layouts/html-doc {:title "A test page"}
                 [:div
                  [:h1.text-3xl "Hello world From HTML"]
                  [:p "This is a test"]]]}))


(def web-app (-&gt; app
                 (hc/wrap-response-middleware)))
</code></pre>
<p>Example of <a href="https://github.com/metosin/reitit">Reitit</a> routes with middleware configured:</p>
<pre><code class="language-clojure">(ns http-routing.reitit
  (:require [reitit.ring :as ring]
            [ten-d-c.hiccup-server-components.core :as hc]))


(def web-app
  (ring/ring-handler
   (ring/router
    [["/" {:handler (fn [_]
                      {:hsc/component :ux.pages/home})}]

     ["/dashboard"
      {:get
       {:handler
        (fn [_]
          {:hsc/component :ux.pages/dashboard
           :hsc/params {:username "bobsmith"
                        :email-address "bobsmith@somemail.net"}})}}]

     ["/testing"
      {:get
       {:handler
        (fn [_]
          {:hsc/html [:ux.layouts/html-doc {:title "A test page"}
                      [:div
                       [:h1.text-3xl "Hello world From HTML"]
                       [:p "This is a test"]]]})}}]]

    {:data {:middleware [hc/wrap-response-middleware]
            :enable true}})))
</code></pre>
</div></div></div></div><style>.sidebar {width: 250px !important; left: 0 !important;}
                                                    .namespace-docs {left: 250px !important;}</style></body></html>